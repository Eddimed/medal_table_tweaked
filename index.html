<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="EU27 Medal Table for Milano-Cortina 2026 with a computed EU row, updated automatically.">

    <meta property="og:title" content="Medal Table | Milano-Cortina 2026">
    <meta property="og:description" content="Enhanced medal table with a computed EU27 row.">
    <meta property="og:image" content="https://olympia.diabsurance.de/img/mico2026-emblem-oly.png">
    <meta property="og:url" content="https://olympia.diabsurance.de/">
    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Medal Table | Milano-Cortina 2026">
    <meta name="twitter:description" content="Enhanced medal table with a computed EU27 row.">
    <meta name="twitter:image" content="https://olympia.diabsurance.de/img/mico2026-emblem-oly.png">

    <meta name="robots" content="index, follow">

    <title>Medal Table | Milano-Cortina 2026</title>
    <link rel="icon" href="https://olympia.diabsurance.de/img/emblem_26_only.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">


    

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'diab-blue': '#4285f4',
                        'diab-green': '#34a853',
                        'diab-light-blue': '#e8f0fe',
                        'diab-light-green': '#e6f4ea'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .hover-lift {
            transition: all 0.3s ease;
        }
        .hover-lift:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
        }
        a { color: #2563eb; text-decoration: underline; text-underline-offset: 2px; }
        a:hover { color: #1d4ed8; text-decoration-thickness: 2px; }
        .eu-highlight { background: rgba(52, 168, 83, 0.12); }
        .table-header { background: linear-gradient(90deg, rgba(66,133,244,0.12), rgba(52,168,83,0.12)); }
    
        /* debug frames */
        .debug-frames * { outline: 1px dashed rgba(255, 255, 255, 0.35); }
        .debug-frames .debug-red { outline: 2px solid rgba(255, 0, 0, 0.8) !important; }
        .debug-frames .debug-green { outline: 2px solid rgba(0, 255, 128, 0.8) !important; }
        .debug-frames .debug-blue { outline: 2px solid rgba(80, 160, 255, 0.9) !important; }
    
    </style>
</head>

<body class="gradient-bg font-sans text-gray-900 min-h-screen flex flex-col">
    

    <main class="pt-6 flex-1">
        <section class="text-white max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-8">
            <div class="debug-red max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-0 pb-8">
                <div class="grid gap-10 grid-cols-2 items-start">
                    <div>
                        <div class="flex items-start justify-between">
                            <div class="debug-blue inline-flex items-center gap-2 text-sm font-semibold uppercase tracking-widest">
                                <i class="fa-solid fa-medal"></i> Milano‑Cortina 2026
                            </div>
                        </div>
                        <div class="flex items-center justify-between gap-6 mt-4">
                            <div class="flex items-center gap-4">
                                <span class="bg-white rounded-full p-3 shadow-sm"><img src="img/mico2026-emblem-oly.png" alt="Milano-Cortina 2026 Emblem" class="h-14 w-14"></span>
                                <div>
                                    <h1 class="text-4xl lg:text-5xl font-bold">Medal Table</h1>
                                    <p class="text-base lg:text-base text-white/90">… with the EU27 as additional entry.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end">
                    <a href="https://diabsurance.de" target="_blank" rel="noopener noreferrer" class="ml-4 flex items-center">
                                <img src="img/diabsurance_shorty_300x300.png" alt="diabsurance" class="h-12 w-12">
                    </a>
                    </div>
                </div>
            </div>
                        

<div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden hover-lift">

                <div class="overflow-x-auto">
                    <table class="min-w-full text-left">
                        <thead class="table-header text-sm uppercase text-gray-600">
                            <tr>
                                <th class="px-6 py-3 cursor-pointer" data-sort="rank">Rank</th>
                                <th class="px-6 py-3 cursor-pointer" data-sort="country">Country</th>
                                <th class="px-6 py-3 cursor-pointer" data-sort="noc">IOC</th>
                                <th class="px-6 py-3 cursor-pointer" data-sort="gold">Gold</th>
                                <th class="px-6 py-3 cursor-pointer" data-sort="silver">Silver</th>
                                <th class="px-6 py-3 cursor-pointer" data-sort="bronze">Bronze</th>
                                <th class="px-6 py-3 cursor-pointer" data-sort="total">Total</th>
                            </tr>
                        </thead>
                        <tbody id="medal-body" class="text-gray-800 text-sm"></tbody>
                    </table>
                </div>

                <div id="error-state" class="hidden p-6 text-red-700 bg-red-50">
                    Could not load the medal data. Please try again later.
                </div>
                <div id="error-hint" class="hidden px-6 pb-6 text-sm text-gray-600"></div>
            </div>

            <div class="mt-4 grid gap-3 sm:grid-cols-1 lg:grid-cols-2">
                <div class="bg-white/90 rounded-full shadow-md border border-gray-100 px-5 py-3 text-sm text-gray-700 flex flex-col items-center text-center justify-center gap-1">
                    <div>Source: <a id="source-url" href="https://en.wikipedia.org/w/rest.php/v1/page/2026_Winter_Olympics_medal_table/html" target="_blank" rel="noopener noreferrer" class="underline">Wikipedia (Medal Table)</a></div>
                    <div>Updated (every 30 min): <span id="last-updated-compact">Loading…</span></div>
                </div>
                <div class="bg-white/90 rounded-full shadow-md border border-gray-100 px-5 py-3 text-sm text-gray-700 flex items-center text-center justify-center">
                    Click headers to sort.<br>
                    EU27 row is dynamically updated.
                </div>
            </div>
        </section>

    </main>

<!-- Footer -->
    <footer class="bg-gray-900 text-white text-center py-2">
        <div>
            <a href="https://www.openstreetmap.org/relation/2793104" target="_blank"
            rel="noopener noreferrer">Stuttgart</a>, Feb 2026 - <a
                    href="https://diabsurance.de/" class="hover:text-gray-200 transition-colors duration-300">Diabsurance</a> - All rights reserved - <a
                    href="https://diabsurance.de/impressum.html" class="hover:text-gray-200 transition-colors duration-300">Impress</a>
        </div>
    </footer>

    <script>
        const state = { rows: [], sortKey: 'rank', sortDir: 'asc' };

        function sortRows(rows, key, dir) {
            const factor = dir === 'asc' ? 1 : -1;
            return [...rows].sort((a, b) => {
                if (typeof a[key] === 'number' && typeof b[key] === 'number') {
                    return (a[key] - b[key]) * factor;
                }
                return String(a[key]).localeCompare(String(b[key])) * factor;
            });
        }

        function renderRows(rows) {
            const body = document.getElementById('medal-body');
            body.innerHTML = '';
            rows.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = row.noc === 'EU27' ? 'eu-highlight font-semibold' : '';
                const flag = row.flag_url ? `<img src="${row.flag_url}" alt="${row.country} flag" class="h-4 w-6 rounded-sm object-cover border border-gray-300">` : '';
                tr.innerHTML = `
                    <td class="px-6 py-3">${row.rank}</td>
                    <td class="px-6 py-3">
                        <div class="flex items-center gap-3">
                            ${flag}
                            <span>${row.country}</span>
                        </div>
                    </td>
                    <td class="px-6 py-3">${row.noc}</td>
                    <td class="px-6 py-3">${row.gold}</td>
                    <td class="px-6 py-3">${row.silver}</td>
                    <td class="px-6 py-3">${row.bronze}</td>
                    <td class="px-6 py-3">${row.total}</td>
                `;
                body.appendChild(tr);
            });
        }

                function formatUpdated(value) {
            if (!value || value === 'Unknown') return value;
            const date = new Date(value);
            if (Number.isNaN(date.getTime())) return value;
            const formatter = new Intl.DateTimeFormat('en-GB', {
                day: '2-digit',
                month: 'short',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                timeZone: 'UTC',
                hour12: false,
            });
            return formatter.format(date).replace(',', '');
        }

function attachSortHandlers() {
            document.querySelectorAll('[data-sort]').forEach(th => {
                th.addEventListener('click', () => {
                    const key = th.dataset.sort;
                    if (state.sortKey === key) {
                        state.sortDir = state.sortDir === 'asc' ? 'desc' : 'asc';
                    } else {
                        state.sortKey = key;
                        state.sortDir = 'asc';
                    }
                    const sorted = sortRows(state.rows, state.sortKey, state.sortDir);
                    renderRows(sorted);
                });
            });
        }

        async function loadMedals() {
            try {
                const response = await fetch('data/medals_eu.json', { cache: 'no-store' });
                if (!response.ok) throw new Error(`Failed to load: ${response.status}`);
                const data = await response.json();
                state.rows = data.rows || [];
                const updatedRaw = data.last_updated_utc || 'Unknown';
                const updated = formatUpdated(updatedRaw);
                const lastUpdated = document.getElementById('last-updated');
                if (lastUpdated) lastUpdated.textContent = updated;
                const lastUpdatedCompact = document.getElementById('last-updated-compact');
                if (lastUpdatedCompact) lastUpdatedCompact.textContent = updated;
                const sourceUrl = document.getElementById('source-url');
                if (sourceUrl) {
                    sourceUrl.textContent = 'Wikipedia (Medal Table)';
                    sourceUrl.href = 'https://en.wikipedia.org/w/rest.php/v1/page/2026_Winter_Olympics_medal_table/html';
                }
                renderRows(sortRows(state.rows, state.sortKey, state.sortDir));
                attachSortHandlers();
            } catch (err) {
                document.getElementById('error-state').classList.remove('hidden');
                const hint = document.getElementById('error-hint');
                if (window.location.protocol === 'file:') {
                    hint.textContent = 'Tip: This page uses fetch() and will not load JSON when opened via file://. Run a local server (e.g. `python3 -m http.server` from the repo) or use GitHub Pages.';
                    hint.classList.remove('hidden');
                } else {
                    hint.textContent = `Details: ${err}`;
                    hint.classList.remove('hidden');
                }
                console.error(err);
            }
        }

        loadMedals();
    </script>
</body>
</html>
